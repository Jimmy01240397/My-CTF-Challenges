magic = 228
with open('emoji.txt', 'rb') as f:
    emoji = f.read()

#emoji = emoji.encode('utf32')

bytedata = b''
for i in range(0, len(emoji), 4):
    num = int.from_bytes(emoji[i:i+4], 'little')
    if num >= 128768:
        num -= 3
    if num >= 128752:
        num -= 3
    if num >= 128733:
        num -= 5
    if num >= 128725:
        num -= 2
    if num >= 128715:
        num -= 5
    if num >= 128640:
        num -= 48
    num ^= magic
    if (num >= 128512 and num <= 128767):
        num -= 128512
        bytedata += bytes([num])
with open('code.data', 'wb') as f:
    f.write(bytedata)
